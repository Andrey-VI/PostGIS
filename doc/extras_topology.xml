<?xml version="1.0" encoding="UTF-8"?>
<chapter id="Topology">
	<title>Topology</title>
	<para>The PostGIS Topology types and functions are used to manged topological objects such as faces, edges and nodes.</para>
	<para>Details of this project can be found at <ulink url="http://trac.osgeo.org/postgis/wiki/UsersWikiPostgisTopology">PostGIS Tology Wiki</ulink></para>
	<para>All functions and tables associated with this module are installed in a schema called <varname>topology</varname>.</para>
	<para>Functions that are defined in SQL/MM standard are prefixed with ST_ and functions specific to PostGIS are not prefixed.</para>
	
	<sect1 id="Topology_ManagementFunctions">
		<refentry id="CreateTopology">
			<refnamediv>
				<refname>CreateTopology</refname>
			
				<refpurpose>Creates a new topology schema and registers this new schema in the topology.topology table.</refpurpose>
			</refnamediv>
		
			<refsynopsisdiv>
			<funcsynopsis>
				<funcprototype>
				<funcdef>integer <function>CreateTopology</function></funcdef>
				<paramdef><type>text </type> <parameter>topology_schema_name</parameter></paramdef>
				</funcprototype>
	
				<funcprototype>
				<funcdef>integer <function>CreateTopology</function></funcdef>
				<paramdef><type>text </type> <parameter>topology_schema_name</parameter></paramdef>
				<paramdef><type>integer </type> <parameter>srid</parameter></paramdef>
				<paramdef><type>double precision </type> <parameter>tolerance</parameter></paramdef>
				</funcprototype>
			</funcsynopsis>
			</refsynopsisdiv>
		
			<refsection>
			<title>Description</title>
		
			<para>Creates a new schema with name <varname>topology_name</varname> consisting of tables (<varname>edge_data</varname>,<varname>face</varname>,<varname>node</varname>, <varname>relation</varname>
				and registers this new topology in the topology.topology table. It returns the id of the topology in the topology table. The srid is the spatial reference identified as 
			defined in spatial_ref_sys table for that topology.  Toplogies must be uniquely named.  The tolerance is measured in the units of the spatial reference system.</para>
	
			<!-- use this format if new function -->
			<para>Availability: 2.0.0</para>
			
			</refsection>
		
		
			<refsection>
				<title>Examples</title>
				<para>This example creates a new schema called ma_topo that will store edges, faces, and relations in Massachusetts State Plane meters.
					The tolerance represents 1/2 meter since the spatial reference system is a meter based spatial reference system</para>
				<programlisting>SELECT topology.CreateTopology('ma_topo',26986, 0.5);</programlisting>
			</refsection>
		
			<!-- Optionally add a "See Also" section -->
			<refsection>
				<title>See Also</title>
			
				<para><xref linkend="spatial_ref_sys"/></para>
			</refsection>
		</refentry>
		<refentry id="DropTopology">
			<refnamediv>
				<refname>DropTopology</refname>
			
				<refpurpose>Use with caution: Drops a topology schema and deletes its reference from  topology.topology table and references to tables in that schema from the geometry_columns table.</refpurpose>
			</refnamediv>
		
			<refsynopsisdiv>
			<funcsynopsis>
				<funcprototype>
				<funcdef>integer <function>DropTopology</function></funcdef>
				<paramdef><type>text </type> <parameter>topology_schema_name</parameter></paramdef>
				</funcprototype>
			</funcsynopsis>
			</refsynopsisdiv>
		
			<refsection>
			<title>Description</title>
		
			<para>Drops a topology schema and deletes its reference from topology.topology table and references to tables in that schema from the geometry_columns table.
			This function should be USED WITH CAUTION, as it could destroy data you care about.  If the schema does not exist, it just removes reference entries the named schema.</para>
	
			<!-- use this format if new function -->
			<para>Availability: 2.0.0</para>
			
			</refsection>
		
		
			<refsection>
				<title>Examples</title>
				<para>Cascade drops the ma_topo schema and removes all references to it in topology.topology and geometry_columns.</para>
				<programlisting>SELECT topology.DropTopology('ma_topo');</programlisting>
			</refsection>
		
			<!-- Optionally add a "See Also" section -->
			<refsection>
				<title>See Also</title>
			
				<para><xref linkend="geometry_columns"/></para>
			</refsection>
		</refentry>
	</sect1>
</chapter>
