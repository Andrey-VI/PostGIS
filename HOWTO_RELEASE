How to release
~~~~~~~~~~~~~~
  Date: 2009-07-01

Versioning Scheme
-----------------

Release version is composed by POSTGIS_MAJOR_VERSION, POSTGIS_MINOR_VERSION
and POSTGIS_MICRO_VERSION components.

By default only [POSTGIS_MICRO_VERSION] increments between releases.

[POSTGIS_MINOR_VERSION] is incremented (and MICRO set to 0) when minor
additions have been introduced (one or two functions can be considered
*micro* additions)

[POSTGIS_MAJOR_VERSION] is incremented (and MICRO and MINOR set to 0) when
a dump/reload of existing spatial databases is *REQUIRED* for things
to work or rather *HIGHLY RECOMMENDED* to get new functionalities.

Requirements
------------

In order to build a release, you will need to build PostGIS and the 
documentation -- that means having the required software:

* For PostGIS:
  - PostgreSQL 
  - GEOS
  - Proj4
* For the docs:
  - xsltproc
  - DocBook XSL scripts
  - ImageMagick

Release procedure
-----------------

1) Re-generate the ChangeLog using svn2cl.
2) Edit NEWS: set release date and check all notable changes have
   been reported (extract from ChangeLog).
3) Edit README.postgis and set release date and version.
4) Add release notes in doc/release_notes.xml
5) Commit all your changes
6) Extensions -- change the 
   a) extensions/postgis/postgis.control, extensions/postgis_topology/postgis_topology.control the the release number
   b) change the extensions/postgis/Makefile (so all the versions for upgrade upgrade to new release)
   c) change the extensions/postgis_topolog/Makefile (same change as b)
   d) If you have 9.1+ run make on extensions/postgis, extensions/postgis_topology and verify things install
7) Tag trunk:  
   svn copy http://svn.osgeo.org/postgis/trunk http://svn.osgeo.org/postgis/tags/x.x.x
8) Checkout tag:
   svn checkout http://svn.osgeo.org/postgis/tags/x.x.x
9) Update Version.config as specified in Versioning Scheme above.
10) Commit your version number change to the tag.
11) Run: sh make_dist.sh x.x.x
12) Copy tarball to web site and edit downloads page
13) Announce on e-mail 
    - postgis-users
    - postgis-devel
    - pgsql-announce
    - osgeo-discuss
14) Update web sites
    - PostGIS News
    - PostGIS doc release versioned doc - http://www.postgis.org/documentation/
     (or remind Chris Hodgson)
    - Freshmeat
    - Wikipedia
15) Update Trac and make old Milestone as completed


